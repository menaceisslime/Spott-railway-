<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DA SLIME SPOTüêç</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{ font-family: sans-serif; background:black; color:#00ff6a; display:flex; justify-content:center; align-items:center; height:100vh; margin:0;}
.container{ width:90%; max-width:520px; text-align:center;}
input{ width:100%; padding:14px; border-radius:30px; border:2px solid #00ff6a; background:#000; color:#00ff6a; margin-top:10px;}
button{ padding:14px 20px; margin-top:12px; border-radius:20px; border:none; background:#00ff6a; color:black; cursor:pointer; font-weight:bold;}
#progressBar{ width:100%; height:18px; background:#222; border-radius:10px; overflow:hidden; margin-top:18px;}
#progressInner{ height:100%; width:0%; background:#00ff6a;}
#status{ margin-top:10px; font-size:14px;}
</style>
</head>
<body>
<div class="container">
  <h1>DA SLIME SPOTüêç</h1>
  <input id="input" placeholder="Enter song / video / playlist title..." />
  <div style="display:flex; gap:10px; justify-content:center; margin-top:12px;">
    <button onclick="start('song')">DOWNLOAD SONG</button>
    <button onclick="start('video')">DOWNLOAD VIDEO</button>
    <button onclick="start('album')">DOWNLOAD ALBUM</button>
  </div>
  <div id="progressBar"><div id="progressInner"></div></div>
  <div id="status">Waiting...</div>
</div>

<script>
let evt;
function start(type){
  const query = document.getElementById("input").value.trim();
  if(!query) return alert("Enter a title");

  const domain = window.location.origin;

  if(evt) evt.close();
  evt = new EventSource(domain + "/progress");

  evt.onmessage = (e) => {
    const data = JSON.parse(e.data);
    document.getElementById("progressInner").style.width = data.percent + "%";
    document.getElementById("status").innerText = "Downloading... " + data.percent + "%";
  };

  window.location.href = `${domain}/${type}?q=${encodeURIComponent(query)}`;
}
</script>
</body>
</html>